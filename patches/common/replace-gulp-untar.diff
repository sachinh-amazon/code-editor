Index: third-party-src/build/gulpfile.cli.js
===================================================================
--- third-party-src.orig/build/gulpfile.cli.js
+++ third-party-src/build/gulpfile.cli.js
@@ -16,7 +16,7 @@ const { promises: fs, existsSync, mkdirS
 
 const task = require('./lib/task');
 const watcher = require('./lib/watch');
-const { debounce } = require('./lib/util');
+const util = require('./lib/util');
 const createReporter = require('./lib/reporter').createReporter;
 
 const root = 'cli';
@@ -110,7 +110,6 @@ const compileFromSources = (callback) =>
 };
 
 const acquireBuiltOpenSSL = (callback) => {
-	const untar = require('gulp-untar');
 	const gunzip = require('gulp-gunzip');
 	const dir = path.join(tmpdir(), 'vscode-openssl-download');
 	mkdirSync(dir, { recursive: true });
@@ -123,7 +122,7 @@ const acquireBuiltOpenSSL = (callback) =
 
 	gulp.src('*.tgz', { cwd: dir })
 		.pipe(gunzip())
-		.pipe(untar())
+		.pipe(util.untar())
 		.pipe(gulp.dest(`${root}/openssl`))
 		.on('error', callback)
 		.on('end', () => {
@@ -177,7 +176,7 @@ const compileCliTask = task.define('comp
 const watchCliTask = task.define('watch-cli', () => {
 	warnIfRustNotInstalled();
 	return watcher(`${src}/**`, { read: false })
-		.pipe(debounce(compileCliTask));
+		.pipe(util.debounce(compileCliTask));
 });
 
 gulp.task(compileCliTask);
Index: third-party-src/build/gulpfile.reh.js
===================================================================
--- third-party-src.orig/build/gulpfile.reh.js
+++ third-party-src/build/gulpfile.reh.js
@@ -186,7 +186,7 @@ if (defaultNodeTask) {
 
 function nodejs(platform, arch) {
 	const { fetchUrls, fetchGithub } = require('./lib/fetch');
-	const untar = require('gulp-untar');
+	const untar = util.untar;
 
 	if (arch === 'armhf') {
 		arch = 'armv7l';
Index: third-party-src/build/lib/util.js
===================================================================
--- third-party-src.orig/build/lib/util.js
+++ third-party-src/build/lib/util.js
@@ -3,10 +3,44 @@
  *  Copyright (c) Microsoft Corporation. All rights reserved.
  *  Licensed under the MIT License. See License.txt in the project root for license information.
  *--------------------------------------------------------------------------------------------*/
+var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
+    if (k2 === undefined) k2 = k;
+    var desc = Object.getOwnPropertyDescriptor(m, k);
+    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
+      desc = { enumerable: true, get: function() { return m[k]; } };
+    }
+    Object.defineProperty(o, k2, desc);
+}) : (function(o, m, k, k2) {
+    if (k2 === undefined) k2 = k;
+    o[k2] = m[k];
+}));
+var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
+    Object.defineProperty(o, "default", { enumerable: true, value: v });
+}) : function(o, v) {
+    o["default"] = v;
+});
+var __importStar = (this && this.__importStar) || (function () {
+    var ownKeys = function(o) {
+        ownKeys = Object.getOwnPropertyNames || function (o) {
+            var ar = [];
+            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
+            return ar;
+        };
+        return ownKeys(o);
+    };
+    return function (mod) {
+        if (mod && mod.__esModule) return mod;
+        var result = {};
+        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
+        __setModuleDefault(result, mod);
+        return result;
+    };
+})();
 var __importDefault = (this && this.__importDefault) || function (mod) {
     return (mod && mod.__esModule) ? mod : { "default": mod };
 };
 Object.defineProperty(exports, "__esModule", { value: true });
+exports.VinylStat = void 0;
 exports.incremental = incremental;
 exports.debounce = debounce;
 exports.fixWin32DirectoryPermissions = fixWin32DirectoryPermissions;
@@ -26,6 +60,7 @@ exports.rebase = rebase;
 exports.filter = filter;
 exports.streamToPromise = streamToPromise;
 exports.getElectronVersion = getElectronVersion;
+exports.untar = untar;
 const event_stream_1 = __importDefault(require("event-stream"));
 const debounce_1 = __importDefault(require("debounce"));
 const gulp_filter_1 = __importDefault(require("gulp-filter"));
@@ -33,8 +68,10 @@ const gulp_rename_1 = __importDefault(re
 const path_1 = __importDefault(require("path"));
 const fs_1 = __importDefault(require("fs"));
 const rimraf_1 = __importDefault(require("rimraf"));
+const vinyl_1 = __importDefault(require("vinyl"));
 const url_1 = require("url");
 const ternary_stream_1 = __importDefault(require("ternary-stream"));
+const tar = __importStar(require("tar"));
 const root = path_1.default.dirname(path_1.default.dirname(__dirname));
 const NoCancellationToken = { isCancellationRequested: () => false };
 function incremental(streamProvider, initial, supportsCancellation) {
@@ -311,4 +348,85 @@ function getElectronVersion() {
     const msBuildId = /^ms_build_id="(.*)"$/m.exec(npmrc)[1];
     return { electronVersion, msBuildId };
 }
+class VinylStat {
+    dev;
+    ino;
+    mode;
+    nlink;
+    uid;
+    gid;
+    rdev;
+    size;
+    blksize;
+    blocks;
+    atimeMs;
+    mtimeMs;
+    ctimeMs;
+    birthtimeMs;
+    atime;
+    mtime;
+    ctime;
+    birthtime;
+    constructor(stat) {
+        this.dev = stat.dev ?? 0;
+        this.ino = stat.ino ?? 0;
+        this.mode = stat.mode ?? 0;
+        this.nlink = stat.nlink ?? 0;
+        this.uid = stat.uid ?? 0;
+        this.gid = stat.gid ?? 0;
+        this.rdev = stat.rdev ?? 0;
+        this.size = stat.size ?? 0;
+        this.blksize = stat.blksize ?? 0;
+        this.blocks = stat.blocks ?? 0;
+        this.atimeMs = stat.atimeMs ?? 0;
+        this.mtimeMs = stat.mtimeMs ?? 0;
+        this.ctimeMs = stat.ctimeMs ?? 0;
+        this.birthtimeMs = stat.birthtimeMs ?? 0;
+        this.atime = stat.atime ?? new Date(0);
+        this.mtime = stat.mtime ?? new Date(0);
+        this.ctime = stat.ctime ?? new Date(0);
+        this.birthtime = stat.birthtime ?? new Date(0);
+    }
+    isFile() { return true; }
+    isDirectory() { return false; }
+    isBlockDevice() { return false; }
+    isCharacterDevice() { return false; }
+    isSymbolicLink() { return false; }
+    isFIFO() { return false; }
+    isSocket() { return false; }
+}
+exports.VinylStat = VinylStat;
+function untar() {
+    return event_stream_1.default.through(function (f) {
+        if (!f.contents || !Buffer.isBuffer(f.contents)) {
+            this.emit('error', new Error('Expected file with Buffer contents'));
+            return;
+        }
+        const self = this;
+        const parser = new tar.Parser();
+        parser.on('entry', (entry) => {
+            if (entry.type === 'File') {
+                const chunks = [];
+                entry.on('data', (chunk) => chunks.push(chunk));
+                entry.on('end', () => {
+                    const file = new vinyl_1.default({
+                        path: entry.path,
+                        contents: Buffer.concat(chunks),
+                        stat: new VinylStat({
+                            mode: entry.mode,
+                            mtime: entry.mtime,
+                            size: entry.size
+                        })
+                    });
+                    self.emit('data', file);
+                });
+            }
+            else {
+                entry.resume();
+            }
+        });
+        parser.on('error', (err) => self.emit('error', err));
+        parser.end(f.contents);
+    });
+}
 //# sourceMappingURL=util.js.map
\ No newline at end of file
Index: third-party-src/build/lib/util.ts
===================================================================
--- third-party-src.orig/build/lib/util.ts
+++ third-party-src/build/lib/util.ts
@@ -11,10 +11,12 @@ import path from 'path';
 import fs from 'fs';
 import _rimraf from 'rimraf';
 import VinylFile from 'vinyl';
-import { ThroughStream } from 'through';
+import through from 'through';
 import sm from 'source-map';
 import { pathToFileURL } from 'url';
 import ternaryStream from 'ternary-stream';
+import type { Transform } from 'stream';
+import * as tar from 'tar';
 
 const root = path.dirname(path.dirname(__dirname));
 
@@ -351,7 +353,7 @@ export function rebase(count: number): N
 }
 
 export interface FilterStream extends NodeJS.ReadWriteStream {
-	restore: ThroughStream;
+	restore: through.ThroughStream;
 }
 
 export function filter(fn: (data: any) => boolean): FilterStream {
@@ -380,3 +382,90 @@ export function getElectronVersion(): Re
 	const msBuildId = /^ms_build_id="(.*)"$/m.exec(npmrc)![1];
 	return { electronVersion, msBuildId };
 }
+
+export class VinylStat implements fs.Stats {
+
+	readonly dev: number;
+	readonly ino: number;
+	readonly mode: number;
+	readonly nlink: number;
+	readonly uid: number;
+	readonly gid: number;
+	readonly rdev: number;
+	readonly size: number;
+	readonly blksize: number;
+	readonly blocks: number;
+	readonly atimeMs: number;
+	readonly mtimeMs: number;
+	readonly ctimeMs: number;
+	readonly birthtimeMs: number;
+	readonly atime: Date;
+	readonly mtime: Date;
+	readonly ctime: Date;
+	readonly birthtime: Date;
+
+	constructor(stat: Partial<fs.Stats>) {
+		this.dev = stat.dev ?? 0;
+		this.ino = stat.ino ?? 0;
+		this.mode = stat.mode ?? 0;
+		this.nlink = stat.nlink ?? 0;
+		this.uid = stat.uid ?? 0;
+		this.gid = stat.gid ?? 0;
+		this.rdev = stat.rdev ?? 0;
+		this.size = stat.size ?? 0;
+		this.blksize = stat.blksize ?? 0;
+		this.blocks = stat.blocks ?? 0;
+		this.atimeMs = stat.atimeMs ?? 0;
+		this.mtimeMs = stat.mtimeMs ?? 0;
+		this.ctimeMs = stat.ctimeMs ?? 0;
+		this.birthtimeMs = stat.birthtimeMs ?? 0;
+		this.atime = stat.atime ?? new Date(0);
+		this.mtime = stat.mtime ?? new Date(0);
+		this.ctime = stat.ctime ?? new Date(0);
+		this.birthtime = stat.birthtime ?? new Date(0);
+	}
+
+	isFile(): boolean { return true; }
+	isDirectory(): boolean { return false; }
+	isBlockDevice(): boolean { return false; }
+	isCharacterDevice(): boolean { return false; }
+	isSymbolicLink(): boolean { return false; }
+	isFIFO(): boolean { return false; }
+	isSocket(): boolean { return false; }
+}
+
+export function untar(): Transform {
+	return es.through(function (this: through.ThroughStream, f: VinylFile) {
+		if (!f.contents || !Buffer.isBuffer(f.contents)) {
+			this.emit('error', new Error('Expected file with Buffer contents'));
+			return;
+		}
+
+		const self = this;
+		const parser = new tar.Parser();
+
+		parser.on('entry', (entry: tar.ReadEntry) => {
+			if (entry.type === 'File') {
+				const chunks: Buffer[] = [];
+				entry.on('data', (chunk: Buffer) => chunks.push(chunk));
+				entry.on('end', () => {
+					const file = new VinylFile({
+						path: entry.path,
+						contents: Buffer.concat(chunks),
+						stat: new VinylStat({
+							mode: entry.mode,
+							mtime: entry.mtime,
+							size: entry.size
+						})
+					});
+					self.emit('data', file);
+				});
+			} else {
+				entry.resume();
+			}
+		});
+
+		parser.on('error', (err: Error) => self.emit('error', err));
+		parser.end(f.contents);
+	}) as Transform;
+}
\ No newline at end of file
Index: third-party-src/package.json
===================================================================
--- third-party-src.orig/package.json
+++ third-party-src/package.json
@@ -178,7 +178,6 @@
     "gulp-replace": "^0.5.4",
     "gulp-sourcemaps": "^3.0.0",
     "gulp-svgmin": "^4.1.0",
-    "gulp-untar": "^0.0.7",
     "husky": "^0.13.1",
     "innosetup": "^6.4.1",
     "istanbul-lib-coverage": "^3.2.0",
@@ -206,6 +205,7 @@
     "source-map": "0.6.1",
     "source-map-support": "^0.3.2",
     "style-loader": "^3.3.2",
+    "tar": "^7.5.4",
     "ts-loader": "^9.5.1",
     "ts-node": "^10.9.1",
     "tsec": "0.2.7",
